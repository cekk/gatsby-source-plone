{"componentChunkName":"component---src-templates-default-js","path":"/tutorial/5_images_and_files/","result":{"data":{"ploneCollection":null,"ploneDocument":{"id":"http://localhost:8080/Plone/tutorial/5_images_and_files","title":"Image and File Handling","description":"","text":{"react":"[{\"type\":\"p\",\"props\":{\"children\":[\"Media content that can be displayed or downloaded are first downloaded into the Gatsby cache by the plugin and later queried in by the Gatsby site. This allows image optimization and manipulation with the Sharp plugin and helps configure file download for other types.\"]}},{\"type\":\"h2\",\"props\":{\"id\":\"files\",\"children\":[\"Files\"]}},{\"type\":\"p\",\"props\":{\"children\":[\"Handling file node creation in the Gatsby-site would require configuration of \",{\"type\":\"a\",\"props\":{\"href\":\"https://v2--gatsbyjs.netlify.com/packages/gatsby-source-filesystem\",\"children\":[\"gatsby-source-filesystem\"]}},\".\"]}},{\"type\":\"p\",\"props\":{\"children\":[\"Firstly, make sure you install it with:\"]}},{\"type\":\"pre\",\"props\":{\"children\":[{\"type\":\"code\",\"props\":{\"children\":[\"yarn add gatsby-source-filesystem\"]}}]}},{\"type\":\"p\",\"props\":{\"children\":[\"Then in \",{\"type\":\"code\",\"props\":{\"children\":[\"gatsby-config.js\"]}},\":\"]}},{\"type\":\"pre\",\"props\":{\"children\":[{\"type\":\"code\",\"props\":{\"className\":\"language-javascript\",\"children\":[\"    // Note: gatsby-source-filesystems is required also to make Plone\\n    // to have publicURL and be downloadable from the gatsby site\\n    {\\n      resolve: 'gatsby-source-filesystem',\\n      options: {\\n        path: `${__dirname}/src/static`,\\n      },\\n    },\"]}}]}},{\"type\":\"p\",\"props\":{\"children\":[\"For the plugin to work, you need to create a static folder and configure it with the plugin, here we've created \",{\"type\":\"code\",\"props\":{\"children\":[\"/src/static\"]}},\" and added it to \",{\"type\":\"code\",\"props\":{\"children\":[\"path\"]}},\".\"]}},{\"type\":\"p\",\"props\":{\"children\":[\"Now in GraphQL, file nodes will be available to query as:\"]}},{\"type\":\"pre\",\"props\":{\"children\":[{\"type\":\"code\",\"props\":{\"className\":\"language-graphql\",\"children\":[\"allPloneFile(filter: { _backlinks: { eq: $path } }) {\\n  edges {\\n    node {\\n      id\\n      title\\n      description\\n      file {\\n        filename\\n        publicURL\\n      }\\n      _type\\n      _path\\n    }\\n  }\\n}\"]}}]}},{\"type\":\"h1\",\"props\":{\"id\":\"images\",\"children\":[\"Images\"]}},{\"type\":\"p\",\"props\":{\"children\":[\"Configuring gatsby-source-filesystem, images, along with other file types are downloaded into the Gatsby cache. But instead of just getting their publicURLs, they can be processed by Sharp plugins and optimized images can be queried. For more information about go through the documentation for \",{\"type\":\"a\",\"props\":{\"href\":\"https://v2--gatsbyjs.netlify.com/packages/gatsby-plugin-sharp/\",\"children\":[\"gatsby-plugin-sharp\"]}},\" and \",{\"type\":\"a\",\"props\":{\"href\":\"https://v2--gatsbyjs.netlify.com/packages/gatsby-transformer-sharp\",\"children\":[\"gatsby-transformer-sharp\"]}}]}},{\"type\":\"p\",\"props\":{\"children\":[\"Install the plugins required:\"]}},{\"type\":\"pre\",\"props\":{\"children\":[{\"type\":\"code\",\"props\":{\"className\":\"language-bash\",\"children\":[\"yarn add gatsby-image gatsby-plugin-sharp gatsby-transformer-sharp\"]}}]}},{\"type\":\"p\",\"props\":{\"children\":[\"In the \",{\"type\":\"code\",\"props\":{\"children\":[\"gatsby-config.js\"]}},\" these just need to be added, no other options required:\"]}},{\"type\":\"pre\",\"props\":{\"children\":[{\"type\":\"code\",\"props\":{\"className\":\"language-javascript\",\"children\":[\"plugins: [\\n  ...\\n  'gatsby-plugin-sharp',\\n  'gatsby-transformer-sharp',\\n],\"]}}]}},{\"type\":\"p\",\"props\":{\"children\":[\"Now to query from GraphQL:\"]}},{\"type\":\"pre\",\"props\":{\"children\":[{\"type\":\"code\",\"props\":{\"className\":\"language-graphql\",\"children\":[\"  allPloneImage {\\n      edges {\\n        node {\\n          id\\n          title\\n          image {\\n            publicURL\\n            childImageSharp {\\n              fixed(width: 600) {\\n                ...GatsbyImageSharpFixed\\n              }\\n            }\\n          }\\n          _path\\n        }\\n      }\\n    }\"]}}]}},{\"type\":\"p\",\"props\":{\"children\":[\"This query returns all images in width \",{\"type\":\"code\",\"props\":{\"children\":[\"600px\"]}},\" but you configure this with a wide range of options. We'd recommend going through the Sharp docs mentioned above.\"]}},{\"type\":\"p\",\"props\":{\"children\":[\"Next: \",{\"type\":\"Link\",\"props\":{\"href\":null,\"to\":\"/tutorial/6_richtext_component/\",\"children\":[\"RichText Component\"]}}]}}]"},"_path":"/tutorial/5_images_and_files/"},"ploneEvent":null,"ploneFolder":null,"ploneNewsItem":null,"ploneBreadcrumbs":{"items":[{"_id":"http://localhost:8080/Plone/tutorial","_path":"/tutorial/","title":"Tutorial"},{"_id":"http://localhost:8080/Plone/tutorial/5_images_and_files","_path":"/tutorial/5_images_and_files/","title":"Image and File Handling"}]},"allPloneFile":{"edges":[]},"allPloneImage":{"edges":[]}},"pageContext":{}},"staticQueryHashes":["2891224598"]}