{"componentChunkName":"component---src-templates-default-js","path":"/reference/search_traversal/","result":{"data":{"ploneCollection":null,"ploneDocument":{"id":"http://localhost:8080/Plone/reference/search_traversal","title":"How plugin uses @search endpoint","description":"","text":{"react":"[{\"type\":\"p\",\"props\":{\"children\":[\"In the \",{\"type\":\"a\",\"props\":{\"href\":\"https://github.com/plone/plone.restapi\",\"children\":[\"plone.restapi\"]}},\", the \",{\"type\":\"code\",\"props\":{\"children\":[\"@search\"]}},\" endpoint when fetched without any query returns the full list of content objects. This is used to pull the whole content tree and create nodes with tree hierarchy.\"]}},{\"type\":\"p\",\"props\":{\"children\":[\"The procedure followed for this:\"]}},{\"type\":\"p\",\"props\":{\"children\":[\"At first, this plugin uses \",{\"type\":\"code\",\"props\":{\"children\":[\"@search\"]}},\" endpoint to get a flat list of all content objects.\"]}},{\"type\":\"p\",\"props\":{\"children\":[\"For instance, \",{\"type\":\"code\",\"props\":{\"children\":[\"https://plonedemo.kitconcept.com/en/@search\"]}},\" gives the response:\"]}},{\"type\":\"pre\",\"props\":{\"children\":[{\"type\":\"code\",\"props\":{\"className\":\"language-json\",\"children\":[\"{\\n  \\\"@id\\\": \\\"https://plonedemo.kitconcept.com/en/@search\\\",\\n  \\\"items\\\": [\\n    {\\n      \\\"@id\\\": \\\"https://plonedemo.kitconcept.com/en\\\",\\n      \\\"@type\\\": \\\"LRF\\\",\\n      \\\"description\\\": \\\"\\\",\\n      \\\"review_state\\\": \\\"published\\\",\\n      \\\"title\\\": \\\"English\\\"\\n    },\\n    {\\n      \\\"@id\\\": \\\"https://plonedemo.kitconcept.com/en/frontpage\\\",\\n      \\\"@type\\\": \\\"Document\\\",\\n      \\\"description\\\": \\\"The ultimate Open Source Enterprise CMS\\\",\\n      \\\"review_state\\\": \\\"published\\\",\\n      \\\"title\\\": \\\"Welcome to Plone 5\\\"\\n    },\\n    {\\n      \\\"@id\\\": \\\"https://plonedemo.kitconcept.com/en/demo/a-page\\\",\\n      \\\"@type\\\": \\\"Document\\\",\\n      \\\"description\\\": \\\"Aenean dictum auctor elit, in volutpat ipsum venenatis at. Quisque lobortis augue et enim venenatis interdum. In egestas, est at condimentum ultrices, tortor enim malesuada nulla; vel sagittis nullam.\\\",\\n      \\\"review_state\\\": \\\"published\\\",\\n      \\\"title\\\": \\\"A Page\\\"\\n    }\\n ]\\n}\"]}}]}},{\"type\":\"p\",\"props\":{\"children\":[\"The \",{\"type\":\"code\",\"props\":{\"children\":[\"items\"]}},\" is an array of all the content objects.\"]}},{\"type\":\"p\",\"props\":{\"children\":[\"Next, using this flat list, plugin iterates through the \",{\"type\":\"code\",\"props\":{\"children\":[\"@id\"]}},\" attributes making individual requests for each content object to get full data.\"]}},{\"type\":\"p\",\"props\":{\"children\":[\"From the previous request, plugin extracts the \",{\"type\":\"code\",\"props\":{\"children\":[\"@id\"]}},\"s forming a list of URLs for each content object:\"]}},{\"type\":\"pre\",\"props\":{\"children\":[{\"type\":\"code\",\"props\":{\"children\":[\"https://plonedemo.kitconcept.com/en\\nhttps://plonedemo.kitconcept.com/en/frontpage\\nhttps://plonedemo.kitconcept.com/en/demo/a-page\\n...\"]}}]}},{\"type\":\"p\",\"props\":{\"children\":[\"Each request will fetch the required data of the content object:\"]}},{\"type\":\"pre\",\"props\":{\"children\":[{\"type\":\"code\",\"props\":{\"className\":\"language-json\",\"children\":[\"{\\n  \\\"@components\\\": {\\n    \\\"breadcrumbs\\\": {\\n      \\\"@id\\\": \\\"https://plonedemo.kitconcept.com/en/demo/a-page/@breadcrumbs\\\"\\n    },\\n    \\\"navigation\\\": {\\n      \\\"@id\\\": \\\"https://plonedemo.kitconcept.com/en/demo/a-page/@navigation\\\"\\n    },\\n    \\\"workflow\\\": {\\n      \\\"@id\\\": \\\"https://plonedemo.kitconcept.com/en/demo/a-page/@workflow\\\"\\n    }\\n  },\\n  \\\"@id\\\": \\\"https://plonedemo.kitconcept.com/en/demo/a-page\\\",\\n  \\\"@type\\\": \\\"Document\\\",\\n  \\\"UID\\\": \\\"eb023ac4d6cd4446ae692cdfd5058e91\\\",\\n  \\\"allow_discussion\\\": null,\\n  \\\"changeNote\\\": \\\"\\\",\\n  \\\"contributors\\\": [],\\n  \\\"created\\\": \\\"2015-07-31T15:42:54+02:00\\\",\\n  \\\"...\\\": \\\"...\\\"\\n}\"]}}]}},{\"type\":\"p\",\"props\":{\"children\":[\"Then this plugin spreads this data to nodes (making them available for GraphQL requests in Gatsby).\"]}}]"},"_path":"/reference/search_traversal/"},"ploneEvent":null,"ploneFolder":null,"ploneNewsItem":null,"ploneBreadcrumbs":{"items":[{"_id":"http://localhost:8080/Plone/reference","_path":"/reference/","title":"Docs"},{"_id":"http://localhost:8080/Plone/reference/search_traversal","_path":"/reference/search_traversal/","title":"How plugin uses @search endpoint"}]},"allPloneFile":{"edges":[]},"allPloneImage":{"edges":[]}},"pageContext":{}},"staticQueryHashes":["2891224598"]}